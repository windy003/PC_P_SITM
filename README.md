# 截图工具

一个专为 **Windows 11 平板触屏模式**设计的 Python 截图工具，支持系统托盘、区域截图和画笔标注功能。

## 功能特性

- **系统托盘常驻**：程序运行后常驻在系统右下角托盘
- **双击打开**：双击托盘图标打开悬浮窗界面
- **全屏截图**：一键截取整个屏幕
- **区域截图**：手指或触控笔拖动自由选择截图区域
- **画笔标注**：两种截图模式都支持红色画笔标注重点
- **触屏友好**：
  - 大尺寸按钮，方便触摸操作
  - 屏幕底部"保存"和"取消"按钮
  - 支持手指和触控笔画红色标注线
  - 无需实体键盘操作

## 安装依赖

```bash
pip install -r requirements.txt
```

或直接安装 PyQt5：

```bash
pip install PyQt5
```

## 使用方法

1. **启动程序**：
```bash
python screenshot_tool.py
```

2. **打开截图工具**：
   - 双击系统托盘图标
   - 或右键托盘图标，选择"显示截图工具"

3. **隐藏悬浮窗到托盘**：
   - 点击右上角红色"✕"按钮，悬浮窗隐藏到系统托盘
   - 程序继续在后台运行
   - 双击托盘图标可重新打开悬浮窗

4. **截图操作**：
   - **全屏截图**：点击"📷 全屏截图"按钮，截取整个屏幕
   - **区域截图**：点击"✂️ 区域截图"按钮，用手指或触控笔拖动选择区域

5. **画笔标注**（触屏模式）：
   - 截图后会自动进入编辑模式
   - 用手指或触控笔在屏幕上拖动即可画红线标注
   - **提示框位置**：默认显示在右上角，避免遮挡截图内容（尤其是区域截图）
   - **工具栏可拖动**：按住工具栏空白处（按钮之外的灰色区域）可以拖动整个面板到任意位置
   - **提示框可拖动**：右上角的提示框也可以按住拖动到任意位置，进一步避免遮挡画线区域
   - 点击屏幕底部"✓ 保存"按钮保存到桌面
   - 点击"✗ 取消"按钮放弃截图

6. **区域选择**（触屏模式）：
   - 用手指或触控笔拖动选择截图区域
   - 青色边框显示选择范围，四角有标记
   - 实时显示区域尺寸
   - 点击右上角"✗ 取消"按钮退出选择

7. **退出程序**：
   - 右键托盘图标，选择"退出"

## 触屏优化

本程序专为触屏设备优化：
- **大尺寸按钮**：所有按钮至少 60px 高，方便手指点击
- **触控支持**：触控笔和手指均可用于画笔标注
- **可拖动界面**：
  - 提示框可拖动，避免遮挡重要区域
  - 工具栏可拖动，自由调整位置
  - 虚线边框和手形光标提示可拖动元素
- **无键盘操作**：所有操作均可通过触屏完成
- **智能交互**：按钮点击区域会排除拖动功能，避免误触

## 截图保存位置

截图会自动保存到：`用户目录\OneDrive\图片\Screenshots\`

文件名格式：`screenshot_YYYYMMDD_HHMMSS.png`

例如：`C:\Users\YourName\OneDrive\图片\Screenshots\screenshot_20250109_143025.png`

**注意**：
- 如果目录不存在，程序会自动创建
- 保存成功后会显示绿色提示框，1.5秒后自动消失

## 系统要求

- Python 3.6+
- Windows / Linux / macOS
- PyQt5 库

## 特别说明

- 程序启动后会在系统托盘显示绿色相机图标
- 悬浮窗可以拖动到任意位置
- **点击悬浮窗的"✕"按钮只会隐藏窗口到托盘，不会退出程序**
- 双击托盘图标可重新显示悬浮窗
- 截图编辑时光标会变成十字形状
- 区域选择时会显示实时的尺寸信息
- 完全支持触屏操作，适合平板模式
- 键盘快捷键（可选）：ESC 取消，Enter 保存

## 界面说明

### 主悬浮窗
- 位置：屏幕中央（可拖动）
- 按钮：
  - 全屏截图（绿色）
  - 区域截图（绿色）
  - 隐藏按钮（右上角红色圆形"✕"）- 点击后隐藏到系统托盘
- 尺寸：自适应，适合触摸操作
- 拖动：点击空白区域可拖动窗口
- 行为：点击"✕"按钮不会退出程序，只是隐藏窗口

### 截图编辑窗口
- **提示框**（右上角）：
  - 显示操作说明
  - 默认位置在右上角，避免遮挡截图内容
  - 可拖动：按住提示框可移动到任意位置
  - 虚线边框表示可拖动
  - 光标变为手形
- **工具栏**（底部中央）：
  - 可拖动：按住工具栏上方的"⋮⋮ 按住空白处可拖动 ⋮⋮"提示区域，或按钮之外的灰色区域
  - 按钮：绿色"✓ 保存"、红色"✗ 取消"
  - 虚线边框表示可拖动

### 区域选择窗口
- **提示框**（左上角）：
  - 显示操作说明
  - 可拖动：按住提示框可移动到任意位置
  - 虚线边框表示可拖动
- **取消按钮**（右上角）：
  - 红色"✗ 取消"按钮
  - 大尺寸，适合触摸
- **选择框**：
  - 青色边框，四角标记
  - 实时显示尺寸信息
